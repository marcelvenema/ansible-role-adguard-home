---

#########################################################
## Adguard Home role defaults                         ##
#########################################################

# default role variables for the adguard-home role
adguard_home:
  # address is the URL to connect to the Adguard Home server.
  address: ""
  # username is the username to connect to the Adguard Home server.
  username: ""
  # password is the password to connect to the Adguard Home server.
  password: ""
  # token is the token used to authenticate to the Adguard Home server.
  token: ""

  # metadata contains information about the role.
  metadata:
    name: "adguard_home"
    description: "Adguard Home for managing DNS filtering."
    version: "0.7.2"
    maintainer: ""
    maintainer_email: ""

  # application contains the configuration for the application server.
  application:
    # validate_certs configures if the certificate of the application server should be validated. example: true or false.
    validate_certs: false

  # container contains the configuration for the container used to run Adguard Home.
  container:
    # name is the name of the container used in podman or docker. example: "adguard-home".
    name: "adguardhome"
    # platform is the platform used for the container. example: "podman" or "docker".
    platform: "podman"
    # uninstall indicates if the container should be uninstalled or not. example: true or false. Default is false.
    uninstall: false
    # repository_url can be a URL to a docker image or a tar file. example: "docker.io/provectuslabs/kafka-ui" or "/tmp/kafka-ui.tar",
    # "https://192.168.1.1/repo/kafka-ui.tar".
    repository_url: "docker.io/adguard/adguardhome"
    # repository_tag can be a tag of the image or a version of the tar file. example: "0.7.2" or "latest".
    # repository_tag: "latest"
    # repository_checksum can be a checksum of the container file. example: "sha256:1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef".
    # repository_checksum: ""
    # repository_checksum_algorithm can be a checksum algorithm of the container file. example: "sha256", "sha512", "md5".
    # repository_checksum_algorithm: "sha256"

    # ports is a list of ports used in the container. example: ["8080:8080"] or ["8080:8080", "8081:8081"].
    ports:
      - "8053:53/tcp"
      - "8053:53/udp"
      - "8084:3000/tcp"
    # podman does not support ports <1024, so we map 8053 to 53. Port 53 will be redirected in host to 8053

    # volumes is a list of volumes used in the container. example: ["kafka-ui/config.yml:/config.yml:Z"] or
    # ["kafka-ui/config.yml:/config.yml:Z", "kafka-ui/data:/data:Z"].
    volumes:
      - "adguardhome/work:/opt/adguardhome/work:Z"
      - "adguardhome/config:/opt/adguardhome/conf:Z"
    # volume_mode is the mode of the volume used in the container. example: "0777" or "0755". Default is "0777".
    volume_mode: "0777"
    # environment is a list of environment variables used in the container. example: ["DYNAMIC_CONFIG_ENABLED=true"].
    # environment:
    # healthcheck is the command used to check if the container is healthy. example: "curl -f http://localhost:8080/health || exit 1".
    healthcheck: "wget -qO- http://127.0.0.1:3000/control/status | grep -q '\"running\":true' || exit 1"
    # healthcheck_start is the time to wait before starting the health check. example: "30s".
    healthcheck_start: "30s"
    # container_quadlet_options is a list of options used in the container. example: ["Environment=NODE_ENV=production",
    # "HealthCmd='wget --no-verbose --tries=1 --spider http://localhost:8080/api/health || exit 1 '"].
    # quadlet_options:


  # secrets contains the configuration for the vault used for storing secrets and configuration data.
  secrets:
    # secret_name is the unique id of the vault used for storing secrets and configuration data. default is {{ ansible_fqdn }}.
    secret_name: "{{ ansible_fqdn | replace('.', '-') }}"
    # secret_engine_name is the name of the vault used for storing secrets and configuration data. example: "kafka-ui-repository".
    secret_engine_name: "adguard-home"
    # secret_engine_description is the description of the vault used for storing secrets and configuration data.  example: "Secrets for Provectus Kafka UI."
    secret_engine_description: "Secrets for AdGuard Home."
